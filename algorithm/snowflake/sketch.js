// Daniel Shiffman
// http://codingtra.in
// http://patreon.com/codingtrain

// Snowfall
// Edited Video: https://youtu.be/cl-mHFCGzYk

let snow = [];
let gravity;

let zOff = 0;


let spritesheet;
let textures = [];

function preload() {   
    spritesheet = loadImage('data:image/png;base64,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');
    // spritesheet = loadImage('https://github.com/CodingTrain/website/blob/master/CodingChallenges/CC_088_snowfall/P5/flakes32.png?raw=true')
//    spritesheet = new Image();
//    spritesheet.src = 'flakes32.png';
//    spritesheet.width = 512;
//    spritesheet.height = 512;
}


function setup() {
  createCanvas(windowWidth, windowHeight);
  gravity = createVector(0, 0.3);
  for (let x = 0; x < spritesheet.width; x += 32) {
    for (let y = 0; y < spritesheet.height; y += 32) {
      let img = spritesheet.get(x, y, 32, 32);
      image(img, x, y);
      textures.push(img);
    }
  }


  for (let i = 0; i < 400; i++) {
    let x = random(width);
    let y = random(height);
    let design = random(textures);
    snow.push(new Snowflake(x, y, design));
  }





}

function draw() {
  background(0);
  //snow.push(new Snowflake());

  zOff += 0.1;

  for (flake of snow) {
    let xOff = flake.pos.x / width;
    let yOff = flake.pos.y / height;
    let wAngle = noise(xOff, yOff, zOff) * TWO_PI;
    let wind = p5.Vector.fromAngle(wAngle);
    wind.mult(0.1);

    flake.applyForce(gravity);
    flake.applyForce(wind);
    flake.update();
    flake.render();
  }

  // for (let i = snow.length - 1; i >= 0; i--) {
  //   if (snow[i].offScreen()) {
  //     snow.splice(i, 1);
  //   }
  // }

}